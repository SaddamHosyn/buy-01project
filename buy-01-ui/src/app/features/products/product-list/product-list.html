<mat-toolbar color="primary" class="app-toolbar">
  <span class="toolbar-title">Buy-01 Marketplace</span>
  <span class="spacer"></span>

  @if (authService.isAuthenticated()) {
  <span class="user-info">Welcome, {{ authService.currentUser()?.name }}</span>

  @if (authService.isSeller()) {
  <button mat-button (click)="goToDashboard()">
    <mat-icon>dashboard</mat-icon>
    Dashboard
  </button>
  }

  <button mat-button routerLink="/profile">
    <mat-icon>account_circle</mat-icon>
    Profile
  </button>

  <button mat-button (click)="logout()">
    <mat-icon>logout</mat-icon>
    Logout
  </button>
  } @else {
  <button mat-button routerLink="/auth/login">
    <mat-icon>login</mat-icon>
    Login
  </button>
  <button mat-raised-button color="accent" routerLink="/auth/register">Register</button>
  }
</mat-toolbar>

<div class="container">
  <h1>Featured Products</h1>

  @if (isLoading()) {
  <!-- Skeleton Loaders -->
  <div class="products-grid">
    @for (i of [1,2,3,4,5,6]; track i) {
    <app-product-card-skeleton />
    }
  </div>
  } @else {
  <div class="products-grid">
    @for (product of products(); track product.id) {
    <mat-card class="product-card">
      @if (product.imageUrls && product.imageUrls.length > 0) {
      <img mat-card-image [src]="product.imageUrls[0]" [alt]="product.name" class="product-image" />
      }

      <mat-card-header>
        <mat-card-title>{{ product.name }}</mat-card-title>
        <mat-card-subtitle>${{ product.price.toFixed(2) }}</mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <p>{{ product.description }}</p>
      </mat-card-content>

      <mat-card-actions>
        <button mat-raised-button color="primary" (click)="viewProduct(product.id)">
          View Details
        </button>
      </mat-card-actions>
    </mat-card>
    } @empty {
    <p class="no-products">No products available</p>
    }
  </div>
  }
</div>
